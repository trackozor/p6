// ========================================================
// Nom du fichier : _lightbox.scss
// Description    : Styles pour la lightbox de l'application Fisheye
// Auteur         : Trackozor
// Date           : 08/01/2025
// Version        : 2.0 (Optimisation Mobile First & Animations Centralisées)
// ========================================================

// --------------------------------------------------------------------------
// VARIABLES LOCALES (Utilisation des variables globales)
// Objectif : Définir des variables spécifiques à la lightbox pour un contrôle
// facilité des animations et du positionnement.
// --------------------------------------------------------------------------

$lightbox-z-index: 1000; // Priorité d'affichage pour s'assurer que la lightbox est au premier plan
$transition-duration: 0.6s; // Durée standard des transitions pour un effet fluide

// --------------------------------------------------------------------------
// LIGHTBOX PRINCIPALE (MOBILE FIRST)
// Objectif : Créer une fenêtre modale qui couvre l'écran entier avec une animation
// d'apparition et de disparition fluide.
// --------------------------------------------------------------------------

.lightbox {
  position: fixed; // La lightbox reste en place même lors du défilement
  inset: 0; // Occupe tout l'écran (équivaut à top, right, bottom, left : 0)
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: var(--neutral-color); // Couleur issue des variables globales
  opacity: 0; // Initialement invisible
  visibility: hidden; // Empêche l'interaction lorsqu'elle est masquée
  z-index: $lightbox-z-index; // Niveau d'affichage élevé

  // Lorsque la lightbox est active (visible)
  &[aria-hidden="false"] {
    opacity: 1;
    visibility: visible;
    animation: fade-in-up $transition-duration ease-in-out; // Animation d’apparition fluide
  }

  // Lorsque la lightbox est désactivée (masquée)
  &[aria-hidden="true"] {
    animation: fade-out-scale $transition-duration ease-in-out; // Animation de fermeture avec réduction progressive
  }
}

// --------------------------------------------------------------------------
// CONTENU DE LA LIGHTBOX
// Objectif : Structurer l'affichage interne de la lightbox avec un espace bien défini.
// --------------------------------------------------------------------------

.lightbox-content {
  width: 80vw; // Taille proportionnelle pour s’adapter aux écrans
  height: 85vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  overflow: hidden; // Empêche le débordement d'éléments
  outline: none; // Supprime le contour bleu par défaut lors des interactions clavier

  @include tablet {
    width: 80vw;
    height: 90vh;
  }

  @include desktop {
    max-height: 75vh;
    align-items: center;
    

  }
}

// --------------------------------------------------------------------------
// BOUTONS DE NAVIGATION ET DE FERMETURE
// Objectif : Gérer les interactions utilisateur pour naviguer ou fermer la lightbox.
// --------------------------------------------------------------------------

button {
  position: absolute;
  background: transparent;
  cursor: pointer;
  color: var(--primary-color);
  font-size: 2rem;
  padding: var(--spacing-xsmall);
  font-weight: bold;
  transition: transform var(--transition-default);

  &:hover {
    transform: scale(1.1); // Légère mise en avant au survol
  }
}

// Bouton de fermeture de la lightbox
.lightbox-close {
  top: var(--spacing-medium);
  right: var(--spacing-medium);
  font-size: 2.5rem;
  background: white;
  border-radius: 0.2rem;
  padding: var(--spacing-xsmall);
  transition: background-color var(--transition-default);

  @include tablet {
    font-size: 3rem;
    font-weight: 500;
  }

  @include desktop {
    right: 3%;
    top:8%;
    font-size: 4.5rem;
    font-weight: 100;
  }

  @include large-desktop {
    font-size: 4rem;
  }

  &:hover {
    background-color: var(--secondary-color);
    color: white;
  }
}

// Boutons de navigation (Précédent & Suivant)
.lightbox-prev,
.lightbox-next {
  border-radius: var(--border-radius-small);
  padding: var(--spacing-xsmall);
  font-size: 2.5rem;
  @extend .pulse; // Effet d'animation

  &:hover {
    animation: rotate 0.3s ease-in-out;
    background-color: var(--primary-color);
    color: #fff;
  }
}

// Position du bouton précédent (à gauche)
.lightbox-prev {
  left: 1%;

  @include tablet {
    left: 4%;
  }
}

// Position du bouton suivant (à droite)
.lightbox-next {
  right: 1%;

  @include tablet {
    right: 4%;
  }
}

// --------------------------------------------------------------------------
// CONTENEUR DES MÉDIAS (IMAGES & VIDÉOS)
// Objectif : Gérer l'affichage des médias tout en garantissant une navigation fluide.
// --------------------------------------------------------------------------

.lightbox-media-container {
  width: 100%;
  height: 90%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;

  @include desktop {
    height:70vh;
    max-height:50px;
  }
}

// Styles appliqués aux images et vidéos dans la lightbox
.lightbox-media-container img,
.lightbox-media-container video {
  width: 85%;
  height: 50%;
  object-fit: contain; // Empêche la déformation
  @extend .scale-up; // Animation fluide

  @include tablet {
    width: 80%;
    height: 50%;
  }

  @include desktop {
    width: 70%;
    height: 50%;
    max-height: 60vh;
  }
}

// --------------------------------------------------------------------------
// EFFETS DE TRANSITION DES MÉDIAS
// Objectif : Gérer l’animation lors du passage d’une image/vidéo à l’autre.
// --------------------------------------------------------------------------

.lightbox-media-container img,
.lightbox-media-container video {
  position: relative;
  transition:
    transform 0.5s ease-in-out,
    opacity 0.5s ease-in-out;

  // Sortie vers la gauche
  &.exiting-left {
    animation: slide-out-left 0.5s ease-in-out forwards;
  }

  // Sortie vers la droite
  &.exiting-right {
    animation: slide-out-right 0.5s ease-in-out forwards;
  }

  // Entrée depuis la gauche
  &.entering-left {
    animation: slide-in-left 0.5s ease-in-out forwards;
  }

  // Entrée depuis la droite
  &.entering-right {
    animation: slide-in-right 0.5s ease-in-out forwards;
  }
}

// --------------------------------------------------------------------------
// LÉGENDE DES MÉDIAS
// Objectif : Afficher et personnaliser les descriptions sous les images et vidéos
// --------------------------------------------------------------------------

.lightbox-caption {
  position: absolute; // Fixe la légende sous l'image
  bottom: 5%; // Décalage depuis le bas pour ne pas coller au bord
  left: 50%; // Centre horizontalement
  transform: translateX(-50%); // Correction pour un centrage parfait
  width: 85%; // Ajustement de la largeur pour éviter les débordements
  text-align: left; // Alignement du texte au centre
  font-size: 1.2rem; // Taille de texte lisible
  font-weight: 300; // Police légèrement épaisse pour plus de visibilité
  color:var(--primary-color); // Texte blanc pour le contraste
  padding: 2% 0; // Ajoute un espace autour du texte
  transition: opacity 0.3s ease-in-out; // Animation douce

  @include tablet {
    font-size: 1.4rem; // Augmentation de la taille du texte sur tablette
    width: 85%;
  }

  @include desktop {
    font-size: 1.2rem; // Encore plus grand pour les grands écrans
    width: 80%;
    bottom: 6%;

  }
}

